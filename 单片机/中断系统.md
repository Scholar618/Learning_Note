## 中断系统

### 中断概念

使单片机具有对外部或内部**随机发生**的事件实时处理能力，很大程度提高单片机处理外部内部事件的能力

> 简单来说就是你正在做一件事时，突然有另一个更紧急的事去完成，这时必须停止（中断）手头的工作，去完成更紧急的事，但在回来时能保证能继续完成未完成的事，即为中断

### 中断优点

分时操作、实时响应、可靠性高。

### 中断结构

![image-20230418103752842](C:\Users\Schloar\AppData\Roaming\Typora\typora-user-images\image-20230418103752842.png)

8051单片机中断系统的主要组成部分有：

① 5个中断源。分别为外部中断源INT0、外部中断源INT1、定时器/计数器中断源T0、定时器/计数器中断源T1和串行通信口中断源（TX和RX）。

② 中断源寄存器。分定时器/计数器控制寄存器TCON和串行通信口控制寄存器SCON。

③ 中断允许寄存器IE。

④ 中断优先级控制寄存器IP。

## 外部中断

### 外部中断介绍

> STC89C5X系列单片机提供了4个外部中断:外部中断0(INTO)、外部中断1(INT1)、外部中断2(INT2)、外部中豳3(INT3)。
> 前两个最基本的一定有，后两个是功能增强

#### 结构图

![image-20230418182624901](C:\Users\Schloar\AppData\Roaming\Typora\typora-user-images\image-20230418182624901.png)

### 外部中断配置

1. 中断源有中断请求
2. 中断源的中断允许位为1
3. CPU开中断（EA = 1）

```c
EA = 1; //打开总中断开关
EX0 = 1; //开外部中断0
IT0 = 0/1; //设置外部中断触发方式
void init() interrupt 0 
{
	//编写功能代码
}
```

